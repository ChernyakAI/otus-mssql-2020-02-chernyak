USE master;
GO

DROP DATABASE IF EXISTS RKC;
GO

CREATE DATABASE RKC;
GO

USE RKC;
GO

-- создание схем
CREATE SCHEMA CD;
GO
CREATE SCHEMA Ref;
GO
CREATE SCHEMA Work;
GO
CREATE SCHEMA Calc;
GO



-- CLR

EXEC sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
EXEC sp_configure 'clr enabled', 1;
EXEC sp_configure 'clr strict security', 0 
GO
RECONFIGURE;
GO

--CREATE ASSEMBLY Declination
--FROM 'd:\Work\otus-mssql-2020-02-chernyak\project\clr\Declination.dll'
--WITH PERMISSION_SET = SAFE;
--GO
CREATE ASSEMBLY [Declination]
FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300E28CD1C80000000000000000E00022200B013000001A0000000600000000000012380000002000000040000000000010002000000002000004000000000000000600000000000000008000000002000000000000030060850000100000100000000010000010000000000000100000000000000000000000BD3700004F000000004000008803000000000000000000000000000000000000006000000C00000020370000380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E746578740000001818000000200000001A000000020000000000000000000000000000200000602E72737263000000880300000040000000040000001C0000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000002000000000000000000000000000004000004200000000000000000000000000000000F137000000000000480000000200050008290000180E00000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000133006006A01000001000011000F00FE16120000016F1000000A720100007072050000706F1100000A0A0F01FE16120000016F1000000A0B06178D1400000125161F209D176F1200000A0C08280100002B19FE04130811082C0D0072090000701309380C01000006724D000070281400000A16FE01130A110A2C0D0072A5000070130938EB00000008179A6F1500000A0D08169A6F1500000A130472E7000070130508280100002B19FE02130B110B2C3C0018130C2B2300110572E9000070281600000A1305110508110C9A281600000A130500110C1758130C110C08280100002BFE04130D110D2DCD002B070008189A13050011056F1700000A6F1500000A13051105280200000613061104071106280300000613071C8D130000012516110716176F1800000A6F1900000AA225171107176F1A00000AA2251872E9000070A225190916176F1800000A6F1900000AA2251A72E9000070A2251B110516176F1800000A6F1900000AA2281B00000A13092B0011092A00001330030019010000020000110072E70000700A02026F1C00000A19596F1A00000A0B02026F1C00000A1A596F1A00000A0C0272ED000070281D00000A2D270272FD000070281D00000A2D1A027209010070281D00000A2D0D027215010070281D00000A2B01170D092C0D0072210100700A0038A600000007722B010070281D00000A130411042C0D0072210100700A003888000000087233010070281D00000A2D1A08723D010070281D00000A2D0D087247010070281D00000A2B0117130511052C0A0072210100700A002B50087251010070281D00000A2D3408725B010070281D00000A2D27087265010070281D00000A2D1A08726F010070281D00000A2D0D087279010070281D00000A2B0117130611062C080072830100700A000613072B0011072A00000013300400020600000300001100020A06066F1C00000A17596F1A00000A0B06066F1C00000A18596F1A00000A0C06066F1C00000A19596F1A00000A0D06066F1C00000A1A596F1A00000A1304077291010070281400000A130511052C090006130638A50500000872AF010070281400000A130711072C0900061306388B0500000872C9010070281400000A130811082C090006130638710500000372D7010070281D00000A13091109395805000000047221010070281D00000A130A110A39E602000000110472DB010070281400000A130B110B2C21000616066F1C00000A18596F1800000A72F1010070281600000A130638140500000972F7010070281400000A130C110C2C21000616066F1C00000A18596F1800000A7219020070281600000A130638E2040000097221020070281400000A130D110D2C610006066F1C00000A1959176F1800000A7291010070281400000A130E110E2C21000616066F1C00000A18596F1800000A726B020070281600000A130638900400000616066F1C00000A18596F1800000A7271020070281600000A13063870040000097279020070281D00000A130F110F2C21000616066F1C00000A19596F1800000A7281020070281600000A1306383E04000009728B020070281400000A131011102C21000616066F1C00000A18596F1800000A72BD020070281600000A1306380C0400000972C3020070281400000A2C0E066F1C00000A19FE0116FE012B0116131111112C21000616066F1C00000A18596F1800000A72BD020070281600000A130638C90300000972D5020070281400000A131211122C21000616066F1C00000A18596F1800000A7258030070281600000A13063897030000087260030070281400000A131311132C21000616066F1C00000A17596F1800000A7286030070281600000A1306386503000008728A030070281400000A131411142C21000616066F1C00000A18596F1800000A7292030070281600000A13063833030000087298030070281400000A131511152C21000616066F1C00000A18596F1800000A72AC030070281600000A130638010300000772B4030070281400000A131611162C21000616066F1C00000A17596F1800000A72BC030070281600000A130638CF0200000772C0030070281400000A16FE01131711172C13000672E0030070281600000A130638A80200000772E0030070281D00000A131811182C34000872E4030070281400000A131911192C21000616066F1C00000A17596F1800000A7286030070281600000A130638640200000000047283010070281D00000A131A111A394802000000097210040070281400000A131B111B2C6D00066F1C00000A1A331B06066F1C00000A1959176F1800000A7222040070281400000A2B0116131C111C2C21000616066F1C00000A17596F1800000A7244040070281600000A130638EF0100000616066F1C00000A17596F1800000A7248040070281600000A130638CF01000009724E040070281400000A131D111D2C21000616066F1C00000A18596F1800000A7270040070281600000A1306389D010000087276040070281D00000A131E111E2C620006066F1C00000A1859176F1800000A727C040070281400000A131F111F2C21000616066F1C00000A18596F1800000A7296040070281600000A1306384B010000000616066F1C00000A18596F1800000A7248040070281600000A1306382A01000008729C040070281400000A132011202C21000616066F1C00000A18596F1800000A7296040070281600000A130638F800000008728A030070281400000A132111212C21000616066F1C00000A18596F1800000A7292030070281600000A130638C60000000872A4040070281400000A132211222C21000616066F1C00000A18596F1800000A72AC040070281600000A130638940000000872B2040070281400000A132311232C1E000616066F1C00000A17596F1800000A7244040070281600000A13062B650872FC040070281400000A132411242C1E000616066F1C00000A17596F1800000A7286030070281600000A13062B360872E4030070281400000A132511252C1E000616066F1C00000A17596F1800000A7286030070281600000A13062B0700000613062B0011062A2202281E00000A002A0042534A4201000100000000000C00000076342E302E33303331390000000005006C000000D8020000237E000044030000E803000023537472696E6773000000002C07000030050000235553005C0C00001000000023475549440000006C0C0000AC01000023426C6F620000000000000002000001471502000908000000FA01330016000001000000180000000200000004000000060000001E0000000F0000000300000001000000040000000100000000006902010000000000060094012F03060001022F030600B300FD020F004F0300000600DB0091020600770191020600430191020600E80191020600B40191020600CD0191020600F20091020600C70010030600A500100306002601910206000D011F020600C10379020A006201D4020A0039025E030600450279020600B40279020600A70379020E005B00A8020600010038001200D4037303000000000F000000000001000100010010009203850241000100010050200000000096001800AC000100C821000000009100B902B4000300F0220000000091007C00B9000400FE28000000008618F7020600070000000100A30200000200980000000100710000000100660000000200990000000300C5020900F70201001100F70206001900F7020A002900F70210003100F70210003900F70210004100F70210004900F70210005100F70210005900F70210006100F70215006900F70210007100F70210007900F70210008900F7020600810043022C009900530030009900C8033600B100CE033F00C10056024E009900EF022C009900BA035400990080022C0099004C025A009900CC022C0099004C0260009900BA03650099005E0276009900DA034E008100F702060020007B00A5012E000B00C0002E001300C9002E001B00E8002E002300F1002E002B0002012E00330002012E003B0002012E004300F1002E004B0008012E00530002012E005B0002012E00630020012E006B004A012E00730057011A006B007A0004800000010000000000000000000000000085020000040000000000000000000000A3002F0000000000040000000000000000000000A300230000000000040000000000000000000000A3008C0000000000040000000000000000000000A30079020000000027004A00000000000049456E756D657261626C656031003C4D6F64756C653E004465636C696E6546494F0053797374656D2E44617461006D73636F726C69620053797374656D2E436F6C6C656374696F6E732E47656E65726963005265706C61636500456E756D657261626C65007365636F6E644E616D65006D6964646C654E616D65004465636C696E654C6173744E616D650053797374656D2E436F7265005F6465636C696E654361736500477569644174747269627574650044656275676761626C6541747472696275746500436F6D56697369626C6541747472696275746500417373656D626C795469746C6541747472696275746500417373656D626C7954726164656D61726B417474726962757465005461726765744672616D65776F726B41747472696275746500417373656D626C7946696C6556657273696F6E41747472696275746500417373656D626C79436F6E66696775726174696F6E4174747269627574650053716C46756E6374696F6E41747472696275746500417373656D626C794465736372697074696F6E41747472696275746500436F6D70696C6174696F6E52656C61786174696F6E7341747472696275746500417373656D626C7950726F6475637441747472696275746500417373656D626C79436F7079726967687441747472696275746500417373656D626C79436F6D70616E794174747269627574650052756E74696D65436F6D7061746962696C6974794174747269627574650053797374656D2E52756E74696D652E56657273696F6E696E670053716C537472696E6700546F537472696E6700537562737472696E670049734D61746368006765745F4C656E677468004465636C696E6174696F6E2E646C6C0053797374656D005472696D004465636C696E6174696F6E0053797374656D2E5265666C656374696F6E005F66696F0053797374656D2E4C696E71004368617200436865636B47656E6465720067656E64657200546F5570706572004D6963726F736F66742E53716C5365727665722E53657276657200546F4C6F776572002E63746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E496E7465726F7053657276696365730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F6465730053797374656D2E446174612E53716C54797065730053797374656D2E546578742E526567756C617245787072657373696F6E730055736572446566696E656446756E6374696F6E7300537472696E6753706C69744F7074696F6E7300436F6E636174004F626A6563740053706C697400436F756E74005265676578006F705F457175616C697479000000000351040103350401431E044804380431043A0430043A002000240418041E04200043043A043004370430043D043E0420003D04350420003F043E043B043D043E04410442044C044E042E0001575E005B0030042D004F0410042D002F045D007B0033002C007D005C0073005B0030042D004F0410042D002F045D007B0033002C007D005C0073005B0030042D004F0410042D002F0420005D007B0033002C007D00240001411E044804380431043A0430043A0020003D04350434043E043F0443044104420438043C0430044F0420004104420440043E043A0430042000240418041E042E00010100032000000F3A04430437044C043C0438044704010B44043E043C0438044704010B38043B044C0438044704010B3B0443043A043804470401096D0061006C006500000743043B044B0401093E043204380447040109350432043804470401093E0433043B044B0401093E0432043D0430040109350432043D04300401093A044B0437044B040109380447043D043004010933044B0437044B04010D660065006D0061006C006500001D5E005B003E0435044D0438044B0443044E045D007B0031007D0024000119380430047C00430430047C0038044F047C0043044F042400010D380445047C004B044504240001034004011543043104350439047C0032043104350439042400010535044F0401213E04350446047C003804350446047C003504350446047C003004350446042400010739044604300401493D04350446047C003204350446047C003604350446047C003C04350446047C003104350446047C004004350446047C003F04350446047C004204350446047C004804350446042400010546043004010735044604300401073B043504460401093B044C044604300401313B043E0439047C0046043E0439047C0033043E0439047C0034043E0439047C0040043E0439047C0031043E043904240001053E044F0401113204350439047C0031043504390424000180813D04380439047C004704380439047C004104380439047C003104380439047C003404380439047C004204380439047C003B04380439047C003C04380439047C003604380439047C004804380439047C004904380439047C003704380439047C004004380439047C0046044B0439047C003204380439047C0046043804390424000107350433043E0401253D044F047C003B044F047C0040044F047C0034044F047C0037044F047C0042044F04240001033804010738044F04240001053804380401134B0439047C00380439047C003E043904240001073E0433043E04010739044C04240001034F04011F5B00430435044B0430043E044D044F04380439045D007B0031007D00240001033004012B330430047C003A0430047C00450430047C00470430047C00480430047C00490430047C0036043004240001113E04320430047C00350432043004240001215E005B00430435044B0430043E044D044F04380439045D007B0031007D00240001034B0401053E043904012148043D0430047C0035043D0430047C0043043D0430047C0030043D043004240001053D044B04010530044F0401195E005B00460447044804490436045D007B0031007D00240001053504390401074F044F042400010735044F0424000105350438040149400430047C00420430047C00340430047C00310430047C00410430047C00320430047C00370430047C003C0430047C003B0430047C00460430047C003F0430047C00440430042400013140044F047C003B044F047C003D044F047C0034044F047C0037044F047C004C044F047C0042044F047C0041044F042400010000824A83947E5BD34495D639996885301600042001010803200001052001011111042001010E042001010211070E0E0E1D0E0E0E0E0E0E020E020208020320000E0520020E0E0E0820021D0E1D0311550A1001010815125D011E00030A010E050002020E0E0500020E0E0E0520020E08080420010E080500010E1D0E0A07080E0E0E020202020E032000082807260E0E0E0E0E020E0202020202020202020202020202020202020202020202020202020202020208B77A5C561934E0890700020E114911490400010E0E0600030E0E0E0E0801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F7773010801000701000000001001000B4465636C696E6174696F6E000005010000000017010012436F7079726967687420C2A920203230323000002901002431653231653461352D643361352D343831642D613835612D66366264386265396363633200000C010007312E302E302E3000004D01001C2E4E45544672616D65776F726B2C56657273696F6E3D76342E372E310100540E144672616D65776F726B446973706C61794E616D65142E4E4554204672616D65776F726B20342E372E31040100000000000000000063E7C490000000000200000065000000583700005819000000000000000000000000000010000000000000000000000000000000525344535FBA47CA61451542A98F0B2864EA4E5A01000000433A5C55736572735C757365725C736F757263655C7265706F735C4465636C696E6174696F6E5C4465636C696E6174696F6E5C6F626A5C44656275675C4465636C696E6174696F6E2E70646200E53700000000000000000000FF370000002000000000000000000000000000000000000000000000F1370000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000000000FF25002000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001001000000018000080000000000000000000000000000001000100000030000080000000000000000000000000000001000000000048000000584000002C03000000000000000000002C0334000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000001000000000000000100000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B0048C020000010053007400720069006E006700460069006C00650049006E0066006F0000006802000001003000300030003000300034006200300000001A000100010043006F006D006D0065006E007400730000000000000022000100010043006F006D00700061006E0079004E0061006D006500000000000000000040000C000100460069006C0065004400650073006300720069007000740069006F006E00000000004400650063006C0069006E006100740069006F006E000000300008000100460069006C006500560065007200730069006F006E000000000031002E0030002E0030002E003000000040001000010049006E007400650072006E0061006C004E0061006D00650000004400650063006C0069006E006100740069006F006E002E0064006C006C0000004800120001004C006500670061006C0043006F007000790072006900670068007400000043006F0070007900720069006700680074002000A90020002000320030003200300000002A00010001004C006500670061006C00540072006100640065006D00610072006B00730000000000000000004800100001004F0072006900670069006E0061006C00460069006C0065006E0061006D00650000004400650063006C0069006E006100740069006F006E002E0064006C006C00000038000C000100500072006F0064007500630074004E0061006D006500000000004400650063006C0069006E006100740069006F006E000000340008000100500072006F006400750063007400560065007200730069006F006E00000031002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000031002E0030002E0030002E003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000143800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
WITH PERMISSION_SET = SAFE
GO

CREATE FUNCTION [dbo].DeclineFIO(@Fio NVARCHAR(250), @Case NCHAR(1))
RETURNS nvarchar(max)
AS
EXTERNAL NAME Declination.[Declination.UserDefinedFunctions].DeclineFIO;
GO
/*
DROP FUNCTION IF EXISTS dbo.DeclineFIO
DROP ASSEMBLY IF EXISTS Declination
*/



-- METADATA

CREATE SEQUENCE dbo.PersonalAccountSequence AS INT   
    START WITH 1  
    INCREMENT BY 1  
;

CREATE TABLE CD.CalculationMethods
(
	ID			INT IDENTITY(1, 1) PRIMARY KEY,
	Name		NVARCHAR(250) NOT NULL
);
CREATE TABLE CD.Tariffs
(
	ID			INT IDENTITY(1, 1) PRIMARY KEY,
	DateBegin	DATE NOT NULL,
	Name		NVARCHAR(250) NOT NULL,
	Value		DECIMAL(15, 2) NOT NULL
);
CREATE TABLE CD.Normatives
(
	ID			INT IDENTITY(1, 1) PRIMARY KEY,
	DateBegin	DATE NOT NULL,
	Name		NVARCHAR(250) NOT NULL,
	Value		DECIMAL(19, 6) NOT NULL
);
CREATE TABLE CD.Units
(
	ID			TINYINT IDENTITY(1, 1) PRIMARY KEY,
	Name		NVARCHAR(250) NOT NULL
);
CREATE TABLE CD.IndicatorTypes
(
	ID			INT IDENTITY(1, 1) PRIMARY KEY,
	Name		NVARCHAR(250) NOT NULL,
	UnitID		TINYINT NOT NULL
);
CREATE TABLE CD.Scales
(
	ID			TINYINT IDENTITY(1, 1) PRIMARY KEY,
	Name		NVARCHAR(250) NOT NULL
);
CREATE TABLE CD.AddressObjectTypes
(
	[ID]			[smallint] IDENTITY(1,1) PRIMARY KEY,
	[SCNAME]		[nvarchar](10) NULL,
	[SOCRNAME]		[nvarchar](50) NULL,
	[LEVEL]			[int] NULL,
	[KOD_T_ST]		[nvarchar](4) NULL,
);

CREATE TABLE Ref.AddressObjects
(
	[ID] [int] IDENTITY(1,1) PRIMARY KEY,
	[ObjectTypeID] [smallint] NOT NULL,
	[Name] [nvarchar](250) NOT NULL,
	[AOGUID] [uniqueidentifier] NULL,
	[PARENTGUID] [uniqueidentifier] NULL,
);
CREATE TABLE Ref.Buildings
(
	ID				INT IDENTITY(1, 1) PRIMARY KEY,
	RegionID		INT NOT NULL,
	TownID			INT NULL,
	MunicipalityID	INT NULL,
	StreetID		INT NULL,
	Number			NVARCHAR(20) NULL,
	ZipCode			NVARCHAR(50) NULL,
	FullAddress		NVARCHAR(500) NULL
);
CREATE TABLE Ref.Persons
(
	ID						INT IDENTITY(1, 1) PRIMARY KEY,
	FirstName				NVARCHAR(150) NOT NULL,
	SecondName				NVARCHAR(150) NULL,
	ThirdName				NVARCHAR(100) NULL,
	Gender					TINYINT NULL,
	BirthDate				DATE NULL,
	Phone					NVARCHAR(50) NULL,
	Email					NVARCHAR(150) NULL,
	DeliveryRegionID		INT NULL,
	DeliveryTownID			INT NULL,
	DeliveryMunicipalityID	INT NULL,
	DeliveryStreetID		INT NULL,
	DeliveryBuildingNumber	NVARCHAR(20) NULL,
	DeliveryPremiseNumber	NVARCHAR(20) NULL,
);
CREATE TABLE Ref.Staff
(
	EmployeeNumber	INT IDENTITY(1, 1) PRIMARY KEY,
	PersonID		INT NOT NULL,
	Position		NVARCHAR(250) NULL
);
CREATE TABLE Ref.PersonalAccounts
(
	ID				INT IDENTITY(1, 1) PRIMARY KEY,
	Number			int NOT NULL,
	DateBegin		DATE NOT NULL,
	DateEnd			DATE NULL,
	BuildingID		INT NOT NULL,
	PremiseNumber	NVARCHAR(20) NULL,
	StaffID			INT NULL,
	TotalSquare		DECIMAL(6, 2) NULL
);

ALTER TABLE Ref.PersonalAccounts  
ADD CONSTRAINT UniqueNumber UNIQUE (Number);   
GO 
ALTER TABLE Ref.PersonalAccounts
ADD CONSTRAINT DefaultUniqueNumber DEFAULT (NEXT VALUE FOR dbo.PersonalAccountSequence) FOR Number
GO


CREATE TABLE Ref.Suppliers
(
	ID				INT IDENTITY(1, 1) PRIMARY KEY,
	Name			NVARCHAR(250) NOT NULL,
	Address			NVARCHAR(500) NULL,
	INN				NVARCHAR(14) NULL,
	KPP				NVARCHAR(9) NULL
);
CREATE TABLE Ref.MeterDevices
(
	ID					INT IDENTITY(1, 1) PRIMARY KEY,
	SerialNumber		NVARCHAR(50) NOT NULL,
	VerificationDate	DATE NULL,
	ReplaceUpToDate		DATE NULL
);

CREATE TABLE Work.PersonalAccountIndicators
(
	ID					INT IDENTITY(1, 1) PRIMARY KEY,
	PersonalAccountID	INT NOT NULL,
	IndicatorTypeID		INT NOT NULL,
	DateBegin			DATE NOT NULL,
	DateEnd				DATE NULL,
	SupplierID			INT NOT NULL,
	CalculationMethodID	INT NOT NULL,
	TariffID			INT NULL,
	NormativeID			INT NULL
);
CREATE TABLE Work.PersonalAccountEvents
(
	ID					INT IDENTITY(1, 1) PRIMARY KEY,
	PersonalAccountID	INT NOT NULL,
	Date				DATE NOT NULL,
	Description			NVARCHAR(MAX) NOT NULL,
	StaffID			INT NULL
);
CREATE TABLE Work.PersonalAccountLiving
(
	ID					INT IDENTITY(1, 1) PRIMARY KEY,
	PersonalAccountID	INT NOT NULL,
	PersonID			INT NOT NULL,
	IsOwner				BIT NULL,
	OwnershipDateBegin	DATE NULL
);
CREATE TABLE Work.MeterDeviceScales
(
	ID				INT IDENTITY(1, 1) PRIMARY KEY,
	MeterDeviceID	INT NOT NULL,
	ScaleID			TINYINT NOT NULL
);
CREATE TABLE Work.MeterDeviceReadings
(
	ID					INT IDENTITY(1, 1) PRIMARY KEY,
	MeterDeviceScaleID	INT NOT NULL,
	ReadingDate			DATE NOT NULL,
	ReadingValue		DECIMAL(19, 6) NOT NULL
);
CREATE TABLE Work.MeterDeviceIndicators
(
	ID							INT IDENTITY(1, 1) PRIMARY KEY,
	MeterDeviceID				INT NOT NULL,
	PersonalAccountIndicatorID	INT NOT NULL,
	InstallationDate			DATE NOT NULL,
	RemovingDate				DATE NULL
);

CREATE TABLE Calc.ClosedPeriods
(
	Period						DATE PRIMARY KEY
);
CREATE TABLE Calc.Charges
(
	ID							INT IDENTITY(1, 1) PRIMARY KEY,
	SupplierID					INT NOT NULL,
	PersonalAccountID			INT NOT NULL,
	PersonalAccountIndicatorID	INT NOT NULL,
	Period						DATE NOT NULL,
	Quantity					DECIMAL(19, 6) NOT NULL,
	Amount						DECIMAL(15, 2) NOT NULL
);
CREATE TABLE Calc.Payments
(
	ID							INT IDENTITY(1, 1) PRIMARY KEY,
	SupplierID					INT NOT NULL,
	PersonalAccountID			INT NOT NULL,
	PersonalAccountIndicatorID	INT NOT NULL,
	Period						DATE NOT NULL,
	Amount						DECIMAL(15, 2) NOT NULL
);
CREATE TABLE Calc.Balance
(
	ID							INT IDENTITY(1, 1) PRIMARY KEY,
	SupplierID					INT NOT NULL,
	PersonalAccountID			INT NOT NULL,
	PersonalAccountIndicatorID	INT NOT NULL,
	Period						DATE NOT NULL,
	Amount						DECIMAL(15, 2) NOT NULL
);

-- связи

ALTER TABLE Work.MeterDeviceScales ADD CONSTRAINT FK_Scales_MeterDeviceScales FOREIGN KEY(ScaleID)
REFERENCES CD.Scales(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Work.MeterDeviceScales ADD CONSTRAINT FK_MeterDevices_MeterDeviceScales FOREIGN KEY(MeterDeviceID)
REFERENCES Ref.MeterDevices(ID)
ON UPDATE CASCADE
ON DELETE CASCADE;

ALTER TABLE Work.MeterDeviceReadings ADD CONSTRAINT FK_MeterDeviceScales_MeterDeviceReadings FOREIGN KEY(MeterDeviceScaleID)
REFERENCES Work.MeterDeviceScales(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Work.MeterDeviceIndicators ADD CONSTRAINT FK_MeterDevices_MeterDeviceIndicators FOREIGN KEY(MeterDeviceID)
REFERENCES Ref.MeterDevices(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE CD.IndicatorTypes ADD CONSTRAINT FK_Units_IndicatorTypes FOREIGN KEY(UnitID)
REFERENCES CD.Units(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Work.PersonalAccountIndicators ADD CONSTRAINT FK_IndicatorTypes_PersonalAccountIndicators FOREIGN KEY(IndicatorTypeID)
REFERENCES CD.IndicatorTypes(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Work.PersonalAccountIndicators ADD CONSTRAINT FK_CalculationMethods_PersonalAccountIndicators FOREIGN KEY(CalculationMethodID)
REFERENCES CD.CalculationMethods(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Work.PersonalAccountIndicators ADD CONSTRAINT FK_Tariffs_PersonalAccountIndicators FOREIGN KEY(TariffID)
REFERENCES CD.Tariffs(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Work.PersonalAccountIndicators ADD CONSTRAINT FK_Normatives_PersonalAccountIndicators FOREIGN KEY(NormativeID)
REFERENCES CD.Normatives(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Work.PersonalAccountEvents ADD CONSTRAINT FK_PersonalAccounts_PersonalAccountEvents FOREIGN KEY(PersonalAccountID)
REFERENCES Ref.PersonalAccounts(ID)
ON UPDATE CASCADE
ON DELETE CASCADE;

ALTER TABLE Work.PersonalAccountEvents ADD CONSTRAINT FK_Staff_PersonalAccountEvents FOREIGN KEY(StaffID)
REFERENCES Ref.Staff(EmployeeNumber)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Charges ADD CONSTRAINT FK_Suppliers_Charges FOREIGN KEY(SupplierID)
REFERENCES Ref.Suppliers(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Charges ADD CONSTRAINT FK_PersonalAccounts_Charges FOREIGN KEY(PersonalAccountID)
REFERENCES Ref.PersonalAccounts(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Charges ADD CONSTRAINT FK_PersonalAccountIndicators_Charges FOREIGN KEY(PersonalAccountIndicatorID)
REFERENCES Work.PersonalAccountIndicators(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Payments ADD CONSTRAINT FK_Suppliers_Payments FOREIGN KEY(SupplierID)
REFERENCES Ref.Suppliers(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Payments ADD CONSTRAINT FK_PersonalAccounts_Payments FOREIGN KEY(PersonalAccountID)
REFERENCES Ref.PersonalAccounts(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Payments ADD CONSTRAINT FK_PersonalAccountIndicators_Payments FOREIGN KEY(PersonalAccountIndicatorID)
REFERENCES Work.PersonalAccountIndicators(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;


ALTER TABLE Calc.Balance ADD CONSTRAINT FK_Suppliers_Balance FOREIGN KEY(SupplierID)
REFERENCES Ref.Suppliers(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Balance ADD CONSTRAINT FK_PersonalAccounts_Balance FOREIGN KEY(PersonalAccountID)
REFERENCES Ref.PersonalAccounts(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;

ALTER TABLE Calc.Balance ADD CONSTRAINT FK_PersonalAccountIndicators_Balance FOREIGN KEY(PersonalAccountIndicatorID)
REFERENCES Work.PersonalAccountIndicators(ID)
ON UPDATE CASCADE
ON DELETE NO ACTION;


ALTER TABLE Work.PersonalAccountIndicators ADD CONSTRAINT FK_Suppliers_PersonalAccountIndicators FOREIGN KEY(SupplierID)
REFERENCES Ref.Suppliers(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Work.MeterDeviceIndicators ADD CONSTRAINT FK_PersonalAccountIndicators_MeterDeviceIndicators FOREIGN KEY(PersonalAccountIndicatorID)
REFERENCES Work.PersonalAccountIndicators(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.PersonalAccounts ADD CONSTRAINT FK_Staff_PersonalAccounts FOREIGN KEY(StaffID)
REFERENCES Ref.Staff(EmployeeNumber)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Work.PersonalAccountLiving ADD CONSTRAINT FK_PersonalAccounts_PersonalAccountLiving FOREIGN KEY(PersonalAccountID)
REFERENCES Ref.PersonalAccounts(ID)
ON UPDATE CASCADE
ON DELETE CASCADE;

ALTER TABLE Work.PersonalAccountIndicators ADD CONSTRAINT FK_PersonalAccounts_PersonalAccountIndicators FOREIGN KEY(PersonalAccountID)
REFERENCES Ref.PersonalAccounts(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;


ALTER TABLE Ref.PersonalAccounts ADD CONSTRAINT FK_Buildings_PersonalAccounts FOREIGN KEY(BuildingID)
REFERENCES Ref.Buildings(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;


ALTER TABLE Ref.AddressObjects ADD CONSTRAINT FK_AddressObjectTypes_AddressObjects FOREIGN KEY(ObjectTypeID)
REFERENCES CD.AddressObjectTypes(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;


ALTER TABLE Ref.Buildings ADD CONSTRAINT FK_AddressObjects_Buildings_Region FOREIGN KEY(RegionID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.Buildings ADD CONSTRAINT FK_AddressObjects_Buildings_Town FOREIGN KEY(TownID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.Buildings ADD CONSTRAINT FK_AddressObjects_Buildings_Municipality FOREIGN KEY(MunicipalityID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.Buildings ADD CONSTRAINT FK_AddressObjects_Buildings_Street FOREIGN KEY(StreetID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;


ALTER TABLE Ref.Persons ADD CONSTRAINT FK_AddressObjects_Persons_Region FOREIGN KEY(DeliveryRegionID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.Persons ADD CONSTRAINT FK_AddressObjects_Persons_Town FOREIGN KEY(DeliveryTownID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.Persons ADD CONSTRAINT FK_AddressObjects_Persons_Municipality FOREIGN KEY(DeliveryMunicipalityID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.Persons ADD CONSTRAINT FK_AddressObjects_Persons_Street FOREIGN KEY(DeliveryStreetID)
REFERENCES Ref.AddressObjects(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;


ALTER TABLE Work.PersonalAccountLiving ADD CONSTRAINT FK_Persons_PersonalAccountLiving FOREIGN KEY(PersonID)
REFERENCES Ref.Persons(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE Ref.Staff ADD CONSTRAINT FK_Persons_Staff FOREIGN KEY(PersonID)
REFERENCES Ref.Persons(ID)
ON UPDATE NO ACTION
ON DELETE NO ACTION;


-- ИНДЕКСЫ
CREATE NONCLUSTERED INDEX IX_PersonalAccountLiving_PersonalAccountID ON Work.PersonalAccountLiving(PersonalAccountID);
CREATE NONCLUSTERED INDEX IX_PersonalAccountLiving_PersonID ON Work.PersonalAccountLiving(PersonID);
CREATE NONCLUSTERED INDEX IX_PersonalAccountEvents_PersonalAccountID ON Work.PersonalAccountEvents(PersonalAccountID);
CREATE NONCLUSTERED INDEX IX_PersonalAccountEvents_StaffID ON Work.PersonalAccountEvents(StaffID);
CREATE NONCLUSTERED INDEX IX_PersonalAccounts_StaffID ON Ref.PersonalAccounts(StaffID);
CREATE NONCLUSTERED INDEX [IX_PersonalAccountIndicators_PersonalAccountID] ON [Work].[PersonalAccountIndicators]
(
	[PersonalAccountID] ASC
)
INCLUDE([DateBegin],[DateEnd],[CalculationMethodID]);
CREATE NONCLUSTERED INDEX IX_PersonalAccountIndicators_CalcMethodInclude ON [Work].[PersonalAccountIndicators]
(
	[CalculationMethodID]
)
INCLUDE ([PersonalAccountID],[TariffID],[NormativeID])
GO
CREATE NONCLUSTERED INDEX IX_MeterDeviceScales_DeviceID_ScaleID ON Work.MeterDeviceScales
(
	MeterDeviceID, 
	ScaleID
);
CREATE NONCLUSTERED INDEX IX_MeterDeviceIndicators_MeterDeviceID ON Work.MeterDeviceIndicators(MeterDeviceID);
CREATE NONCLUSTERED INDEX IX_MeterDeviceIndicators_PersonalAccountIndicatorID ON Work.MeterDeviceIndicators(PersonalAccountIndicatorID);
CREATE NONCLUSTERED INDEX IX_MeterDeviceReadings_MeterDeviceScaleID ON [Work].[MeterDeviceReadings] ([MeterDeviceScaleID])
CREATE NONCLUSTERED INDEX IX_Charges_Period_SupplierID_PersonalAccountIndicatorID ON Calc.Charges
(
	Period,
	SupplierID,
	PersonalAccountIndicatorID
);
CREATE NONCLUSTERED INDEX IX_Charges_Period_PersonalAccountID ON Calc.Charges
(
	Period,
	PersonalAccountID
);
CREATE NONCLUSTERED INDEX IX_Charges_Account_Indicator_Supplier_Period ON Calc.Charges
(
	PersonalAccountID,
	PersonalAccountIndicatorID,
	SupplierID,
	Period
) INCLUDE (Amount);
CREATE NONCLUSTERED INDEX IX_Payments_Period_SupplierID_PersonalAccountIndicatorID ON Calc.Payments
(
	PersonalAccountIndicatorID,
	SupplierID,
	Period	
);
CREATE NONCLUSTERED INDEX IX_Payments_Account_Indicator_Supplier_Preiod ON Calc.Payments
(
	PersonalAccountID,
	PersonalAccountIndicatorID,
	SupplierID,
	Period	
) INCLUDE (Amount);
CREATE NONCLUSTERED INDEX IX_Payments_Period_PersonalAccountID ON Calc.Payments
(
	Period,
	PersonalAccountID
);
CREATE NONCLUSTERED INDEX IX_Balance_Account_Indicator_Supplier_Period ON Calc.Balance
(
	PersonalAccountID,
	PersonalAccountIndicatorID,
	SupplierID,
	Period
) INCLUDE (Amount);
CREATE NONCLUSTERED INDEX IX_Balance_Period ON Calc.Balance
(
	Period
);

-- ОГРАНИЧЕНИЯ

--ALTER TABLE Work.MeterDeviceReadings ADD CONSTRAINT DF_MeterDeviceReadings_ReadingDate CHECK (ReadingDate <= GETDATE());
ALTER TABLE Work.PersonalAccountIndicators ADD CONSTRAINT DF_PersonalAccountIndicators_DateEnd CHECK (DateEnd > DateBegin OR DateEnd IS NULL);
ALTER TABLE Ref.PersonalAccounts ADD CONSTRAINT DF_PersonalAccounts_DateEnd CHECK (DateEnd > DateBegin OR DateEnd IS NULL);
ALTER TABLE Ref.Suppliers ADD CONSTRAINT DF_Suppliers_INN_Unique UNIQUE(INN);
ALTER TABLE Ref.Suppliers ADD CONSTRAINT DF_Suppliers_INN_Len CHECK (LEN(INN)=12);
ALTER TABLE Ref.Persons ADD CONSTRAINT DF_Persons_Email CHECK(Email LIKE '%@%.__%');
GO


-- ОПИСАНИЕ ТАБЛИЦ

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Взаиморасчёты с лицевыми счетами' , @level0type=N'SCHEMA',@level0name=N'Calc', @level1type=N'TABLE',@level1name=N'Balance'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Начисления' , @level0type=N'SCHEMA',@level0name=N'Calc', @level1type=N'TABLE',@level1name=N'Charges'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Оплаты' , @level0type=N'SCHEMA',@level0name=N'Calc', @level1type=N'TABLE',@level1name=N'Payments'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Типы адресных объектов' , @level0type=N'SCHEMA',@level0name=N'CD', @level1type=N'TABLE',@level1name=N'AddressObjectTypes'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Методы расчёта' , @level0type=N'SCHEMA',@level0name=N'CD', @level1type=N'TABLE',@level1name=N'CalculationMethods'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Виды учётных показателей' , @level0type=N'SCHEMA',@level0name=N'CD', @level1type=N'TABLE',@level1name=N'IndicatorTypes'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Нормативы' , @level0type=N'SCHEMA',@level0name=N'CD', @level1type=N'TABLE',@level1name=N'Normatives'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Измерительные шкалы' , @level0type=N'SCHEMA',@level0name=N'CD', @level1type=N'TABLE',@level1name=N'Scales'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Тарифы' , @level0type=N'SCHEMA',@level0name=N'CD', @level1type=N'TABLE',@level1name=N'Tariffs'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Единицы измерений' , @level0type=N'SCHEMA',@level0name=N'CD', @level1type=N'TABLE',@level1name=N'Units'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Адресные объекты' , @level0type=N'SCHEMA',@level0name=N'Ref', @level1type=N'TABLE',@level1name=N'AddressObjects'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Строения' , @level0type=N'SCHEMA',@level0name=N'Ref', @level1type=N'TABLE',@level1name=N'Buildings'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Приборы учёта' , @level0type=N'SCHEMA',@level0name=N'Ref', @level1type=N'TABLE',@level1name=N'MeterDevices'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Лицевые счета' , @level0type=N'SCHEMA',@level0name=N'Ref', @level1type=N'TABLE',@level1name=N'PersonalAccounts'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Физические лица' , @level0type=N'SCHEMA',@level0name=N'Ref', @level1type=N'TABLE',@level1name=N'Persons'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Сотрудники' , @level0type=N'SCHEMA',@level0name=N'Ref', @level1type=N'TABLE',@level1name=N'Staff'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Поставщики' , @level0type=N'SCHEMA',@level0name=N'Ref', @level1type=N'TABLE',@level1name=N'Suppliers'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Привязка приборов учёта к учётным показателям' , @level0type=N'SCHEMA',@level0name=N'Work', @level1type=N'TABLE',@level1name=N'MeterDeviceIndicators'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Показания приборов учёта' , @level0type=N'SCHEMA',@level0name=N'Work', @level1type=N'TABLE',@level1name=N'MeterDeviceReadings'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Измерительные шкалы приборов учёта' , @level0type=N'SCHEMA',@level0name=N'Work', @level1type=N'TABLE',@level1name=N'MeterDeviceScales'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'События персонального учёта' , @level0type=N'SCHEMA',@level0name=N'Work', @level1type=N'TABLE',@level1name=N'PersonalAccountEvents'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Привязка учётных показателей к лицевым счетам' , @level0type=N'SCHEMA',@level0name=N'Work', @level1type=N'TABLE',@level1name=N'PersonalAccountIndicators'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Проживающие по лицевому счёту' , @level0type=N'SCHEMA',@level0name=N'Work', @level1type=N'TABLE',@level1name=N'PersonalAccountLiving'
GO


-- ОПИСАНИЕ ПОЛЕЙ

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Balance', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор поставщика', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Balance', @level2type=N'COLUMN', @level2name=N'SupplierID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор лицевого счёта', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Balance', @level2type=N'COLUMN', @level2name=N'PersonalAccountID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор учётного показателя', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Balance', @level2type=N'COLUMN', @level2name=N'PersonalAccountIndicatorID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Период', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Balance', @level2type=N'COLUMN', @level2name=N'Period'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Сумма', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Balance', @level2type=N'COLUMN', @level2name=N'Amount'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Charges', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор поставщика', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Charges', @level2type=N'COLUMN', @level2name=N'SupplierID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор лицевого счёта', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Charges', @level2type=N'COLUMN', @level2name=N'PersonalAccountID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор учётного показателя', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Charges', @level2type=N'COLUMN', @level2name=N'PersonalAccountIndicatorID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Период', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Charges', @level2type=N'COLUMN', @level2name=N'Period'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Количество', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Charges', @level2type=N'COLUMN', @level2name=N'Quantity'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Сумма', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Charges', @level2type=N'COLUMN', @level2name=N'Amount'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Payments', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор поставщика', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Payments', @level2type=N'COLUMN', @level2name=N'SupplierID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор лицевого счёта', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Payments', @level2type=N'COLUMN', @level2name=N'PersonalAccountID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор учётного показателя', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Payments', @level2type=N'COLUMN', @level2name=N'PersonalAccountIndicatorID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Период', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Payments', @level2type=N'COLUMN', @level2name=N'Period'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Сумма', @level0type=N'SCHEMA', @level0name=N'Calc', @level1type=N'TABLE', @level1name=N'Payments', @level2type=N'COLUMN', @level2name=N'Amount'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'AddressObjectTypes', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'AddressObjectTypes', @level2type=N'COLUMN', @level2name=N'SCNAME'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'CalculationMethods', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'CalculationMethods', @level2type=N'COLUMN', @level2name=N'Name'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'IndicatorTypes', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'IndicatorTypes', @level2type=N'COLUMN', @level2name=N'Name'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор единицы измерения', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'IndicatorTypes', @level2type=N'COLUMN', @level2name=N'UnitID'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Normatives', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата начала действия', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Normatives', @level2type=N'COLUMN', @level2name=N'DateBegin'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Normatives', @level2type=N'COLUMN', @level2name=N'Name'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Значение', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Normatives', @level2type=N'COLUMN', @level2name=N'Value'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Scales', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Scales', @level2type=N'COLUMN', @level2name=N'Name'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Tariffs', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата начала действия', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Tariffs', @level2type=N'COLUMN', @level2name=N'DateBegin'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Tariffs', @level2type=N'COLUMN', @level2name=N'Name'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Значение', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Tariffs', @level2type=N'COLUMN', @level2name=N'Value'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Units', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'CD', @level1type=N'TABLE', @level1name=N'Units', @level2type=N'COLUMN', @level2name=N'Name'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'AddressObjects', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор родительской записи', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'AddressObjects', @level2type=N'COLUMN', @level2name=N'ParentGUID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор типа адресного объекта', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'AddressObjects', @level2type=N'COLUMN', @level2name=N'ObjectTypeID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'AddressObjects', @level2type=N'COLUMN', @level2name=N'Name'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта (регион)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'RegionID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта (город)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'TownID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта (муниципалитет)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'MunicipalityID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта (улица)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'StreetID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Номер строения', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'Number'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Почтовый индекс', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'ZipCode'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Полный адрес', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Buildings', @level2type=N'COLUMN', @level2name=N'FullAddress'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'MeterDevices', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Серийный номер', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'MeterDevices', @level2type=N'COLUMN', @level2name=N'SerialNumber'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата поверки', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'MeterDevices', @level2type=N'COLUMN', @level2name=N'VerificationDate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Заменить прибор учёта до даты', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'MeterDevices', @level2type=N'COLUMN', @level2name=N'ReplaceUpToDate'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'PersonalAccounts', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Номер лицевого счёта', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'PersonalAccounts', @level2type=N'COLUMN', @level2name=N'Number'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата открытия', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'PersonalAccounts', @level2type=N'COLUMN', @level2name=N'DateBegin'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата закрытия', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'PersonalAccounts', @level2type=N'COLUMN', @level2name=N'DateEnd'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор строения', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'PersonalAccounts', @level2type=N'COLUMN', @level2name=N'BuildingID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Номер помещения/квартиры', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'PersonalAccounts', @level2type=N'COLUMN', @level2name=N'PremiseNumber'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Закреплённый специалист', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'PersonalAccounts', @level2type=N'COLUMN', @level2name=N'StaffID'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Имя', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'FirstName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Фамилия', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'SecondName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Отчество', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'ThirdName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Пол (1 - мужской, 0 - женский)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'Gender'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата рождения', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'BirthDate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Телефон', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'Phone'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Адрес электронной почты', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'Email'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта доставки документов (регион)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'DeliveryRegionID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта доставки документов (город)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'DeliveryTownID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта доставки документов (муниципалитет)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'DeliveryMunicipalityID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор адресного объекта доставки документов (улица)', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'DeliveryStreetID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Номер строения для доставки документов', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'DeliveryBuildingNumber'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Номер помещения/квартиры для доставки документов', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Persons', @level2type=N'COLUMN', @level2name=N'DeliveryPremiseNumber'
GO 

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Табельный номер сотрудника', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Staff', @level2type=N'COLUMN', @level2name=N'EmployeeNumber'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор физического лица', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Staff', @level2type=N'COLUMN', @level2name=N'PersonID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Должность', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Staff', @level2type=N'COLUMN', @level2name=N'Position'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Suppliers', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Наименование', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Suppliers', @level2type=N'COLUMN', @level2name=N'Name'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Адрес', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Suppliers', @level2type=N'COLUMN', @level2name=N'Address'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'ИНН', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Suppliers', @level2type=N'COLUMN', @level2name=N'INN'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'КПП', @level0type=N'SCHEMA', @level0name=N'Ref', @level1type=N'TABLE', @level1name=N'Suppliers', @level2type=N'COLUMN', @level2name=N'KPP'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceIndicators', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор прибора учёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceIndicators', @level2type=N'COLUMN', @level2name=N'MeterDeviceID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор учётного показателя', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceIndicators', @level2type=N'COLUMN', @level2name=N'PersonalAccountIndicatorID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата установки прибора учёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceIndicators', @level2type=N'COLUMN', @level2name=N'InstallationDate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата снятия прибора учёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceIndicators', @level2type=N'COLUMN', @level2name=N'RemovingDate'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceReadings', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор шкалы прибора учёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceReadings', @level2type=N'COLUMN', @level2name=N'MeterDeviceScaleID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата показания', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceReadings', @level2type=N'COLUMN', @level2name=N'ReadingDate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Значение показания', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceReadings', @level2type=N'COLUMN', @level2name=N'ReadingValue'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceScales', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор прибора учёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceScales', @level2type=N'COLUMN', @level2name=N'MeterDeviceID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор шкалы прибора учёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'MeterDeviceScales', @level2type=N'COLUMN', @level2name=N'ScaleID'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountEvents', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор лицевого счёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountEvents', @level2type=N'COLUMN', @level2name=N'PersonalAccountID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата события', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountEvents', @level2type=N'COLUMN', @level2name=N'Date'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Описание', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountEvents', @level2type=N'COLUMN', @level2name=N'Description'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Сотрудник', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountEvents', @level2type=N'COLUMN', @level2name=N'StaffID'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор лицевого счёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'PersonalAccountID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор типа учётного показателя', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'IndicatorTypeID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата открытия учётного показателя', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'DateBegin'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата закрытия учётного показателя', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'DateEnd'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор поставщика', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'SupplierID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор метода расчёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'CalculationMethodID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор тарифа', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'TariffID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор норматива', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountIndicators', @level2type=N'COLUMN', @level2name=N'NormativeID'
GO

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор записи', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountLiving', @level2type=N'COLUMN', @level2name=N'ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор лицевого счёта', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountLiving', @level2type=N'COLUMN', @level2name=N'PersonalAccountID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Идентификатор физического лица', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountLiving', @level2type=N'COLUMN', @level2name=N'PersonID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Это собственник', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountLiving', @level2type=N'COLUMN', @level2name=N'IsOwner'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Дата начала владения лицевым счётом', @level0type=N'SCHEMA', @level0name=N'Work', @level1type=N'TABLE', @level1name=N'PersonalAccountLiving', @level2type=N'COLUMN', @level2name=N'OwnershipDateBegin'
GO